system:
    instructions: "You are an assistant that uses Prompt Templates to generate personalized schedules."

    messages:
        welcome: "Hi! I can generate personalized schedules using Prompt Templates."
        error: "Something went wrong."

config:
  agent_name: "PromptTemplateActions"
  agent_label: "PromptTemplateActions"
  description: "Provides guidance to guests by creating personalized schedules."
variables:
    generated_schedule: mutable string = ""
    guest_email: mutable string = ""

start_agent topic_selector:
    description: "Welcome users and begin providing personalized scheduling guidance."

    reasoning:
        actions:
            generate_schedule: @utils.transition to @topic.schedule_generation
                description: "Create personalized schedules"
topic schedule_generation:
    description: "Generates personalized schedules."

    reasoning:
        instructions: ->
            | Run the {!@actions.generate_personalized_schedule}  action with their email.
            | 
            | Current context:
            | 

            if @variables.guest_email:
                | - Email: {!@variables.guest_email}
            else:
                | - Email: None specified

            | When a user asks for help scheduling their day or creating a personalized schedule:
            | 1. Ask for their email address
            | 2. Immediately run {!@actions.generate_personalized_schedule}
            | 3. Output the personalized schedule in a message
            | 
            | Never ask about goals, preferences, or interests. Only {!@actions.generate_personalized_schedule}

        actions:
            generate_personalized_schedule: @actions.generate_personalized_schedule
                with "Input:email" = ...
                set @variables.generated_schedule = @outputs.promptResponse

    actions:
        generate_personalized_schedule:
          description: "Always run this action to automatically generate a personalized schedule that matches the guest's goals, preferences, or interests using existing Salesforce CRM data. This action requires the user's email address."
          inputs:
            "Input:email": string
              description: "Guests's email address"
              is_required: True
              is_user_input: False
          outputs:
            promptResponse: string
              description: "A comprehensive personalized schedule that accounts for the guest's goals, preferences, or interests"
              filter_from_agent: False
              is_displayable: True
          target: "generatePromptResponse://Generate_Personalized_Schedule"
          label: "Generate Personalized Schedule"
          require_user_confirmation: False
          include_in_progress_indicator: False
          progress_indicator_message: "Creating schedule..."

